# java-convenience-store-precourse

# 편의점

---

## 입출력

#### 입력
- 구매할 상품명과 수량을 입력받음
- 프로모션 할인 적용 여부를 받음 (Y/N)
- 프로모션 할인 불가능 한데 구매할 건지 여부를 받음(Y/N)
- 멤버십 할인 적용 여부를 받음 (Y/N)
- 다른 상품을 더 구매하고 싶으면 다시 구매함 (Y/N)

#### 출력
- 현재 보유하고 있는 재고 상태를 출력함
- 최종 영수증 정보를 출력
  - Receipt를 받아서 구매 내역과 증정 상품 내역 출력
  - AmountInformation을 받아서 금액 정보를 출력


#### 예외처리
- 구매할 상품과 입력이 형식에 맞지 않으면 예외 발생
- 입력값을 (Y/N)로만 받을 때 다른 입력이 왔을 때 예외 발생

---



## 재고 관리
- 각 상품을 Product 클래스 구현
- md 파일에서 정보를 가져오는 MDFileReader 구현.
- 재고 관리를 하는 InventoryManager 구현
  - MDFileReader에서 가져온 정보를 Product로 변환하여 저장
  - 고객이 상품을 구매할 때 마다 수량을 재고에서 차감한다.
  - 이름을 통해서 Product를 찾을 수 있다.

#### 예외 처리
- Product
  - product를 생성할 때 이름이 null 이거나 ""이면 예외 발생
  - product를 생성할 때 가격이 0보다 작으면 예외 발생
  - product를 생성할 때 수량이 0보다 작으면 예외 발생
  - 재고에서 차감할 때 재고 수량을 초과하여 구매할 때 예외 발생
  - 재고에서 차감할 때 차감량이 0보다 작으면 예외 발생

-InventoryManager
  - 존재하지 않은 상품을 찾으려 할때 예외 발생

- MDFileReader
  - 파일 경로가 null이거나 ""이면 예외 발생
  - 파일을 찾을 수 없으면 예외 발생
  - 파일이 비어있으면 예외 발생

---


## 프로모션 할인
-할인 정보를 가지고 있는 Promotion 정의
  - 프로모션은 N개 구매 시 1개 무료증정(Buy N Get 1 Free)의 형태로 저장된다.
  - 오늘 날짜가 프로모션 기간 내에 포함되는 확인한다.
- 프로모션 정보를 관리하는 PromotionManager 구현
  - promotion.md에서 할인 정보를 가져와서 Promotion 형태로 저장
  - promotion 이름으로 promotion을 찾을 수 있다.



- 구매에 관한 로직은 StoreManager가 처리한다.
  - 프로모션 혜택은 프로모션 재고 내에서만 적용할 수 있다.
  - 프로모션 기간 중이라면 프로모션 재고를 우선적으로 차감하며, 프로모션 재고가 부족할 경우에는 일반 재고를 사용한다.
  - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 필요한 수량을 추가로 가져오면 혜택을 받을 수 있음을 안내한다.
  - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제하게 됨을 안내한다.


#### 예외 처리
- PromotionManager에서 이름으로 Promotion을 찾을 때 없으면 예외 발생
- StoreManager에서 수량이 부족하면 예외 발생
---

## 멤버십 할인
- 멤버십 회원은 프로모션 미적용 금액의 30%를 할인 받는다.
  - 프로모션 적용 후 남은 금액에 대해 멤버십 할인을 적용한다.
  - 멤버십 할인의 최대 한도는 8,000원이다.


---


## 영수증 출력
- 영수증 정보를 담고있는 Receipt를 정의
- 영수증은 고객의 구매 내역과 할인을 요약하여 출력한다.
- 영수증 항목은 아래와 같다.
  - 구매 상품 내역: 구매한 상품명, 수량, 가격
  - 증정 상품 내역: 프로모션에 따라 무료로 제공된 증정 상품의 목록

#### 예외 처리

---

## 금액 정보
- 최종 금액 정보를 변수로 가지는 AmountInformation 클래스 정의
- 총구매액: 구매한 상품의 총 수량과 총 금액
- 행사할인: 프로모션에 의해 할인된 금액
- 멤버십할인: 멤버십에 의해 추가로 할인된 금액
- 내실돈: 최종 결제 금액
- 영수증의 구성 요소를 보기 좋게 정렬하여 고객이 쉽게 금액과 수량을 확인할 수 있게 한다.

~~~
각 돈과 관련된 출력은 천 단위로 ,가  삽입되어 출력된다.
~~~
